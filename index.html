<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Android-next : Android Next 公共组件库">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Android-next</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/mcxiaoke/Android-Next">View on GitHub</a>

          <h1 id="project_title">Android-next</h1>
          <h2 id="project_tagline">Android Next 公共组件库</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/mcxiaoke/Android-Next/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/mcxiaoke/Android-Next/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="android-next-公共组件库" class="anchor" href="#android-next-%E5%85%AC%E5%85%B1%E7%BB%84%E4%BB%B6%E5%BA%93" aria-hidden="true"><span class="octicon octicon-link"></span></a>Android Next 公共组件库</h1>

<h2>
<a id="tasks-views-widgets-http-utils" class="anchor" href="#tasks-views-widgets-http-utils" aria-hidden="true"><span class="octicon octicon-link"></span></a>Tasks, Views, Widgets, Http, Utils</h2>

<h2>
<a id="项目介绍" class="anchor" href="#%E9%A1%B9%E7%9B%AE%E4%BB%8B%E7%BB%8D" aria-hidden="true"><span class="octicon octicon-link"></span></a>项目介绍</h2>

<p>这个库是我在日常开发过程中积累下来的一些可复用组件，有一些是原创的，有一些是修改开源项目的，有一些则完全是从Android源码/Apache-Commons源码中复制过来的，大部分都在我的工作项目和个人项目中有实际使用案例，具体就不一一说明了</p>

<h2>
<a id="最新版本" class="anchor" href="#%E6%9C%80%E6%96%B0%E7%89%88%E6%9C%AC" aria-hidden="true"><span class="octicon octicon-link"></span></a>最新版本</h2>

<p>已经部署到Maven Central，可以直接使用</p>

<ul>
<li>
<strong>1.0.5</strong> 2014.12.22</li>
<li>
<strong>1.0.4</strong> 2014.09.15</li>
</ul>

<hr>

<h2>
<a id="开始使用" class="anchor" href="#%E5%BC%80%E5%A7%8B%E4%BD%BF%E7%94%A8" aria-hidden="true"><span class="octicon octicon-link"></span></a>开始使用</h2>

<p>Gradle集成方法：</p>

<div class="highlight highlight-groovy"><pre>
    <span class="pl-c">// core 核心库, 格式:jar和aar</span>
    compile <span class="pl-s1"><span class="pl-pds">'</span>com.mcxiaoke.next:core:1.0.+<span class="pl-pds">'</span></span>

    <span class="pl-c">// http HTTP组件, 格式:jar和aar</span>
    compile <span class="pl-s1"><span class="pl-pds">'</span>com.mcxiaoke.next:http:1.0.+<span class="pl-pds">'</span></span>

    <span class="pl-c">// ui UI组件, 格式:aar</span>
    compile <span class="pl-s1"><span class="pl-pds">'</span>com.mcxiaoke.next:ui:1.0.+<span class="pl-pds">'</span></span>

    <span class="pl-c">// extra-abc 依赖support-v7 AppCompat 格式:aar</span>
    compile <span class="pl-s1"><span class="pl-pds">'</span>com.mcxiaoke.next:extra-abc:1.0.+<span class="pl-pds">'</span></span>

</pre></div>

<hr>

<h2>
<a id="模块结构" class="anchor" href="#%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84" aria-hidden="true"><span class="octicon octicon-link"></span></a>模块结构</h2>

<p>分为以下几个模块：</p>

<h4>
<a id="core-核心组件" class="anchor" href="#core-%E6%A0%B8%E5%BF%83%E7%BB%84%E4%BB%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>core 核心组件</h4>

<p>包含异步任务组件，缓存组件，基础Activity和Service，还有一些工具类，按Java包介绍如下：</p>

<ul>
<li><p><strong>com.mcxiaoke.next.annotation</strong> 两个简单的Annotation，标注是否线程安全，纯标注用</p></li>
<li>
<p><strong>com.mcxiaoke.next.app</strong> 基础类，包含:</p>

<ul>
<li>NextBaseActivity 基础Activity，添加了一些ActionBar相关的封装方法</li>
<li>NextBaseFragment 基础Fragment，添加了ActionBar和Activity相关的一些封装方法</li>
<li>MultiIntentService 类似于IntentService，但是可以多个异步任务并发执行，可以在所有任务执行完成后自动stopSelf()，具体请看源码</li>
</ul>
</li>
<li><p><strong>com.mcxiaoke.next.cache</strong> 简单缓存类，包含内存缓存MemoryCache和磁盘缓存DiscCache，使用非常简单，可定制</p></li>
<li><p><strong>com.mcxiaoke.next.collection</strong> 几个常用的集合类，包含：NoDuplicatesArrayList, NoDuplicatesCopyOnWriteArrayList, NoDuplicatesLinkedList和WeakFastHashMap</p></li>
<li><p><strong>com.mcxiaoke.next.common</strong> 包含NextMessage，类似于Android系统的Message类，但是使用更方便，能支持更多数据类型</p></li>
<li><p><strong>com.mcxiaoke.next.db</strong> 包含两个简单的数据库相关的工具类</p></li>
<li><p><strong>com.mcxiaoke.next.geo</strong>  包含LastLocationFinder，用于快速获取上次定位位置</p></li>
<li><p><strong>com.mcxiaoke.next.io</strong> 包含CountingInputStream, CountingOutputStream, StringBuilderWriter, BoundedInputStream等IO数据流相关的封装类，方便使用</p></li>
<li>
<p><strong>com.mcxiaoke.next.task</strong> 包含异步任务执行模块相关的类，详细的使用见后面的说明</p>

<ul>
<li>TaskQueue 核心类，对外接口，支持单例使用</li>
<li>TaskCallback 回调接口</li>
</ul>
</li>
<li>
<p><strong>com.mcxiaoke.next.utils</strong> 包含了很多使用简单但又非常有用的小工具类:</p>

<ul>
<li>AndroidUtils Android系统相关的一些工具类，包括文件路径处理，Toast显示，屏幕方向，组件启用禁用，获取App签名信息等</li>
<li>AssertUtils Assert类，Null检查，对象检查，数组检查等</li>
<li>BitmapUtils Bitmap缩放，旋转，圆角，阴影，裁剪等方法</li>
<li>CryptoUtils 加密算法相关的工具方法，支持MD5/SHA1/SHA256/AES/HEX等</li>
<li>IOUtils IO操作工具类，包含常用的文件复制/字符串/数组/列表/数据流读写方法</li>
<li>MimeUtils MIME工具类，支持根据文件扩展名获取MIME类型</li>
<li>NetworkUtils 网络工具类，支持获取网络类型，设置代理等</li>
<li>ProxyUtils WebView代理设置工具类，这个可能已经失效了</li>
<li>ReflectionUtils Java反射相关的工具类</li>
<li>StringUtils 字符串工具类，支持常用的字符串合并/分割/比较/转换/判断等操作</li>
<li>ViewUtils View相关的几个工具方法，例如getScreenRawSize/getActionBarHeightInDp/getStatusBarHeightInDp/getResourceValue等</li>
<li>ZipUtils 支持ZIP文件压缩/解压缩</li>
</ul>
</li>
</ul>

<hr>

<h4>
<a id="http-http组件" class="anchor" href="#http-http%E7%BB%84%E4%BB%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>http HTTP组件</h4>

<p>包含一个经过简单封装的HTTP操作模块，简化常用的网络请求操作</p>

<ul>
<li>
<strong>NextClient</strong> 网络组件的核心类</li>
<li>
<strong>NextParams</strong> HTTP参数封装和处理</li>
<li>
<strong>NextRequest</strong> HTTP Request</li>
<li>
<strong>NextResponse</strong> HTTP Response</li>
</ul>

<p>详细的使用方法见后面的介绍</p>

<hr>

<h4>
<a id="ui-ui组件" class="anchor" href="#ui-ui%E7%BB%84%E4%BB%B6" aria-hidden="true"><span class="octicon octicon-link"></span></a>ui UI组件</h4>

<p>一些常用的UI控件，可简化日常开发，包含：</p>

<ul>
<li><p><strong>AlertDialogFragment和ProgressDialogFragment</strong> 封装好的DialogFragmen，接口简单，同时有4.0版本和使用support-v4的版本</p></li>
<li><p><strong>EndlessListView</strong> 封装的ListView，添加了支持加载更多数据的接口和FooterView展示</p></li>
<li><p><strong>CheckableFrameLayout</strong> Checkable布局系列，包含几种常用布局的Checkable封装，附带一个很有用的CheckableImageView</p></li>
<li><p><strong>NoPressStateFrameLayout</strong> NoPress布局系统，包含几种常用布局的NoPressState封装</p></li>
<li><p><strong>SquaredFrameLayout</strong> Squared布局系列，包含几个常用布局的Squared封装，正方形布局</p></li>
<li><p><strong>typeface</strong> typeface包里包含一些支持字体设置的常用控件，如Button/TextView/CheckBox等</p></li>
<li><p><strong>AspectRatioImageView</strong> 定制的ImageView，缩放时会保持长宽比</p></li>
<li><p><strong>CircularImageView</strong> 圆形ImageView，一般用作头像等显示，不建议使用，github有更好的项目</p></li>
<li><p><strong>FixedRatioImageView</strong> 强制高宽比的ImageView，可选以水平或垂直方向为基准，另外还有一个强制保持正方形的SquaredImageView</p></li>
<li><p><strong>AdvancedShareActionProvider</strong> 高级版的ShareActionProvider，支持自定义分享菜单列表项，自定图标和分享内容等，包含4.0的版本和使用AppCompat的版本，具体可以看源码和示例</p></li>
<li><p><strong>ArrayAdapterCompat</strong> 增强版的ArrayAdapter，支持2.3以上版本，增加很多实用方法</p></li>
</ul>

<hr>

<h4>
<a id="samples-示例" class="anchor" href="#samples-%E7%A4%BA%E4%BE%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>samples 示例</h4>

<p>包含几个常用模块的示例，主要是TaskQueue/NextClient/AdvancedShareActionProvider的示例</p>

<hr>

<h2>
<a id="使用说明" class="anchor" href="#%E4%BD%BF%E7%94%A8%E8%AF%B4%E6%98%8E" aria-hidden="true"><span class="octicon octicon-link"></span></a>使用说明</h2>

<h4>
<a id="异步任务模块" class="anchor" href="#%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E6%A8%A1%E5%9D%97" aria-hidden="true"><span class="octicon octicon-link"></span></a>异步任务模块</h4>

<div class="highlight highlight-java"><pre>
        <span class="pl-c">// you can use TaskCallable or just Callable</span>
        <span class="pl-s">final</span> <span class="pl-st">TaskCallable&lt;<span class="pl-stj">String</span>&gt;</span> callable<span class="pl-k">=</span><span class="pl-k">new</span> <span class="pl-st">TaskCallable&lt;<span class="pl-stj">String</span>&gt;</span>(<span class="pl-s1"><span class="pl-pds">"</span>name<span class="pl-pds">"</span></span>) {
            <span class="pl-st">@Override</span>
            <span class="pl-s">public</span> <span class="pl-stj">String</span> <span class="pl-en">call</span>() <span class="pl-s">throws</span> <span class="pl-stj">Exception</span> {
                <span class="pl-s">final</span> <span class="pl-stj">String</span> url<span class="pl-k">=</span><span class="pl-s1"><span class="pl-pds">"</span>https://github.com/mcxiaoke/Android-Next/raw/master/README.md<span class="pl-pds">"</span></span>;
                <span class="pl-s">final</span> <span class="pl-stj">NextResponse</span> response<span class="pl-k">=</span><span class="pl-stj">NextClient</span><span class="pl-k">.</span>get(url);
                <span class="pl-k">return</span> response<span class="pl-k">.</span>string();
            }
        };
        <span class="pl-c">// task callback</span>
        <span class="pl-s">final</span> <span class="pl-st">TaskCallback&lt;<span class="pl-stj">String</span>&gt;</span> callback<span class="pl-k">=</span><span class="pl-k">new</span> <span class="pl-st">SimpleTaskCallback&lt;<span class="pl-stj">String</span>&gt;</span>() {
            <span class="pl-st">@Override</span>
            <span class="pl-s">public</span> <span class="pl-st">void</span> <span class="pl-en">onTaskStarted</span>(<span class="pl-s">final</span> <span class="pl-stj">String</span> <span class="pl-v">tag</span>, <span class="pl-s">final</span> <span class="pl-stj">Bundle</span> <span class="pl-v">extras</span>) {
                <span class="pl-c">// task started, main thread</span>
            }

            <span class="pl-st">@Override</span>
            <span class="pl-s">public</span> <span class="pl-st">void</span> <span class="pl-en">onTaskSuccess</span>(<span class="pl-s">final</span> <span class="pl-stj">String</span> <span class="pl-v">value</span>, <span class="pl-s">final</span> <span class="pl-stj">Bundle</span> <span class="pl-v">extras</span>) {
                <span class="pl-c">// task success, main thread</span>
                mTextView<span class="pl-k">.</span>setText(value);
            }

            <span class="pl-st">@Override</span>
            <span class="pl-s">public</span> <span class="pl-st">void</span> <span class="pl-en">onTaskFailure</span>(<span class="pl-s">final</span> <span class="pl-stj">Throwable</span> <span class="pl-v">ex</span>, <span class="pl-s">final</span> <span class="pl-stj">Bundle</span> <span class="pl-v">extras</span>) {
                <span class="pl-c">// task failure, main thread</span>
            }
        };
        <span class="pl-c">// add task, execute concurrently</span>
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>add(callable,callback,<span class="pl-v">this</span>);
        <span class="pl-c">// add task, execute serially</span>
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>addSerially(callable, callback, <span class="pl-v">this</span>);

        <span class="pl-c">// set custom task executor</span>
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>setExecutor(executor);
        <span class="pl-c">//  set yes/no check activity/fragment lifecycle</span>
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>setEnableCallerAliveCheck(<span class="pl-c1">true</span>);
        <span class="pl-c">// save task tag for cancel the task</span>
        <span class="pl-s">final</span> <span class="pl-stj">String</span> tag<span class="pl-k">=</span><span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>add(callable,callback,<span class="pl-v">this</span>);
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>cancel(tag);
        <span class="pl-c">// cancel the task by caller</span>
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>cancelAll(<span class="pl-v">this</span>);
        <span class="pl-c">// cancel all task</span>
        <span class="pl-stj">TaskQueue</span><span class="pl-k">.</span>getDefault()<span class="pl-k">.</span>cancelAll();
</pre></div>

<h4>
<a id="http模块" class="anchor" href="#http%E6%A8%A1%E5%9D%97" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTTP模块</h4>

<div class="highlight highlight-java"><pre>
            <span class="pl-s">final</span> <span class="pl-stj">String</span> url <span class="pl-k">=</span> <span class="pl-s1"><span class="pl-pds">"</span>https://github.com/mcxiaoke/Android-Next/raw/master/README.md<span class="pl-pds">"</span></span>;

            <span class="pl-c">// simple use</span>
            <span class="pl-c">// NextResponse response = NextClient.get(url);</span>

            <span class="pl-c">// advanced use</span>
            <span class="pl-s">final</span> <span class="pl-stj">NextClient</span> client <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-stj">NextClient</span>();
            <span class="pl-s">final</span> <span class="pl-stj">NextRequest</span> request <span class="pl-k">=</span> <span class="pl-stj">NextRequest</span><span class="pl-k">.</span>newBuilder()
                    .url(url)
                    .encoding(<span class="pl-s1"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>)
                    .method(<span class="pl-s1"><span class="pl-pds">"</span>POST<span class="pl-pds">"</span></span>)
                    .header(<span class="pl-s1"><span class="pl-pds">"</span>X-UDID<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>cxgdg4543gd64tgdgs2tgdgst4<span class="pl-pds">"</span></span>)
                    .param(<span class="pl-s1"><span class="pl-pds">"</span>image<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-stj">File</span>(<span class="pl-s1"><span class="pl-pds">"</span>IMG_20141222.jpg<span class="pl-pds">"</span></span>), <span class="pl-s1"><span class="pl-pds">"</span>image/jpeg<span class="pl-pds">"</span></span>)
                    .param(<span class="pl-s1"><span class="pl-pds">"</span>param1<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>value1<span class="pl-pds">"</span></span>)
                            <span class="pl-c">// http progress callback, for monitor upload/download file progress</span>
                    .callback(<span class="pl-k">new</span> <span class="pl-stj">ProgressCallback</span>() {
                        <span class="pl-st">@Override</span>
                        <span class="pl-s">public</span> <span class="pl-st">void</span> <span class="pl-en">onProgress</span>(<span class="pl-s">final</span> <span class="pl-st">long</span> <span class="pl-v">currentSize</span>, <span class="pl-s">final</span> <span class="pl-st">long</span> <span class="pl-v">totalSize</span>) {
                            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http progress: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> currentSize <span class="pl-k">*</span> <span class="pl-c1">100</span> <span class="pl-k">/</span> totalSize);
                        }
                    })<span class="pl-k">.</span>build();


            <span class="pl-s">final</span> <span class="pl-stj">NextResponse</span> response <span class="pl-k">=</span> client<span class="pl-k">.</span>execute(request);
            <span class="pl-c">// get response meta-data</span>
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response successful: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>successful());
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response statusCode: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>code());
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response statusMessage: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>message());
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response contentLength: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>contentLength());
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response contentType: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>contentType());
            <span class="pl-c">// get 301/302/30x location header</span>
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response location: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>location());
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response Server:<span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>header(<span class="pl-s1"><span class="pl-pds">"</span>Server<span class="pl-pds">"</span></span>));
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response Connection: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>header(<span class="pl-s1"><span class="pl-pds">"</span>Connection<span class="pl-pds">"</span></span>));
            <span class="pl-c">// get body as string</span>
            <span class="pl-stj">Log</span><span class="pl-k">.</span>v(<span class="pl-c1">TAG</span>, <span class="pl-s1"><span class="pl-pds">"</span>http response content: <span class="pl-pds">"</span></span> <span class="pl-k">+</span> response<span class="pl-k">.</span>string());
            <span class="pl-c">// get body as  bytes</span>
            <span class="pl-s">final</span> <span class="pl-st">byte</span>[] bytes <span class="pl-k">=</span> response<span class="pl-k">.</span>bytes();
            <span class="pl-s">final</span> <span class="pl-stj">Bitmap</span> bitmap1 <span class="pl-k">=</span> <span class="pl-stj">BitmapFactory</span><span class="pl-k">.</span>decodeByteArray(bytes, <span class="pl-c1">0</span>, bytes<span class="pl-k">.</span>length);
            <span class="pl-c">// get body as  stream</span>
            <span class="pl-s">final</span> <span class="pl-stj">InputStream</span> stream <span class="pl-k">=</span> response<span class="pl-k">.</span>stream();
            <span class="pl-s">final</span> <span class="pl-stj">Bitmap</span> bitmap2 <span class="pl-k">=</span> <span class="pl-stj">BitmapFactory</span><span class="pl-k">.</span>decodeStream(stream);
            <span class="pl-c">// get body as reader</span>
            <span class="pl-s">final</span> <span class="pl-stj">InputStreamReader</span> reader <span class="pl-k">=</span> response<span class="pl-k">.</span>reader(<span class="pl-stj">Charsets</span><span class="pl-c1"><span class="pl-k">.</span>UTF_8</span>);
</pre></div>

<h4>
<a id="缓存模块" class="anchor" href="#%E7%BC%93%E5%AD%98%E6%A8%A1%E5%9D%97" aria-hidden="true"><span class="octicon octicon-link"></span></a>缓存模块</h4>

<div class="highlight highlight-java"><pre>
        <span class="pl-c">// create memory cache, internally using map</span>
        <span class="pl-s">final</span> <span class="pl-st">IMemoryCache&lt;<span class="pl-stj">String</span>, <span class="pl-stj">Object</span>&gt;</span> memoryCache <span class="pl-k">=</span> <span class="pl-stj">CacheFactory</span><span class="pl-k">.</span>createCache();
        <span class="pl-c">// create memory cache, internally using lru cache</span>
        <span class="pl-c">// final IMemoryCache&lt;String,Object&gt; memoryCache=CacheFactory.createLruCache(100);</span>
        memoryCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>strKey<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>value<span class="pl-pds">"</span></span>);
        memoryCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>intKey<span class="pl-pds">"</span></span>, <span class="pl-c1">123</span>);
        memoryCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>boolKey<span class="pl-pds">"</span></span>, <span class="pl-c1">false</span>);
        memoryCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>objKey<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-stj">TaskQueue</span>());
        <span class="pl-s">final</span> <span class="pl-stj">String</span> value <span class="pl-k">=</span> (<span class="pl-stj">String</span>) memoryCache<span class="pl-k">.</span>get(<span class="pl-s1"><span class="pl-pds">"</span>strKey<span class="pl-pds">"</span></span>);

        <span class="pl-s">final</span> <span class="pl-stj">Context</span> context <span class="pl-k">=</span> mockContext();
        <span class="pl-c">// default disc cache, use /data/data/package-name/cache/.disc/ dir</span>
        <span class="pl-s">final</span> <span class="pl-stj">DiscCache</span> discCache <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-stj">DiscCache</span>(context);
        <span class="pl-c">// use custom /data/data/package-name/cache/json-cache/ dir</span>
        <span class="pl-c">//final DiscCache discCache=new DiscCache(context,"json-cache");</span>
        <span class="pl-c">// use custom /sdcard/Android/data/package-name/cache/json-cache/ dir</span>
        <span class="pl-c">//final DiscCache discCache=new DiscCache(context,"json-cache",DiscCache.MODE_EXTERNAL);</span>
        discCache<span class="pl-k">.</span>setCacheDir(<span class="pl-s1"><span class="pl-pds">"</span>dirName<span class="pl-pds">"</span></span>);
        discCache<span class="pl-k">.</span>setCharset(<span class="pl-s1"><span class="pl-pds">"</span>UTF-8<span class="pl-pds">"</span></span>);
        discCache<span class="pl-k">.</span>setFileNameGenerator(nameGenerator);
        <span class="pl-s">final</span> <span class="pl-st">byte</span>[] bytes <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-stj">byte</span>[<span class="pl-c1">100</span>];
        discCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>bytes<span class="pl-pds">"</span></span>, bytes);
        discCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>stream<span class="pl-pds">"</span></span>, <span class="pl-k">new</span> <span class="pl-stj">ByteArrayInputStream</span>(bytes));
        discCache<span class="pl-k">.</span>put(<span class="pl-s1"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>some text for cache<span class="pl-pds">"</span></span>);
        <span class="pl-s">final</span> <span class="pl-st">byte</span>[] bytesValue <span class="pl-k">=</span> discCache<span class="pl-k">.</span>getBytes(<span class="pl-s1"><span class="pl-pds">"</span>bytes<span class="pl-pds">"</span></span>);
        <span class="pl-s">final</span> <span class="pl-stj">File</span> file <span class="pl-k">=</span> discCache<span class="pl-k">.</span>getFile(<span class="pl-s1"><span class="pl-pds">"</span>stream<span class="pl-pds">"</span></span>);
        <span class="pl-s">final</span> <span class="pl-stj">String</span> stringValue <span class="pl-k">=</span> discCache<span class="pl-k">.</span>get(<span class="pl-s1"><span class="pl-pds">"</span>text<span class="pl-pds">"</span></span>);
        discCache<span class="pl-k">.</span>remove(<span class="pl-s1"><span class="pl-pds">"</span>cacheKey<span class="pl-pds">"</span></span>);
        discCache<span class="pl-k">.</span>clear();
        discCache<span class="pl-k">.</span>delete(<span class="pl-k">new</span> <span class="pl-stj">FileFilter</span>() {
            <span class="pl-st">@Override</span>
            <span class="pl-s">public</span> <span class="pl-st">boolean</span> <span class="pl-en">accept</span>(<span class="pl-s">final</span> <span class="pl-stj">File</span> <span class="pl-v">pathname</span>) {
                <span class="pl-k">return</span> <span class="pl-c1">false</span>;
            }
        });

</pre></div>

<hr>

<h2>
<a id="其它问题" class="anchor" href="#%E5%85%B6%E5%AE%83%E9%97%AE%E9%A2%98" aria-hidden="true"><span class="octicon octicon-link"></span></a>其它问题</h2>

<p>发现任何问题可以提issue</p>

<hr>

<h2>
<a id="license" class="anchor" href="#license" aria-hidden="true"><span class="octicon octicon-link"></span></a>License</h2>

<pre><code>Copyright 2013 - 2014 Xiaoke Zhang

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
</code></pre>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Android-next maintained by <a href="https://github.com/mcxiaoke">mcxiaoke</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
